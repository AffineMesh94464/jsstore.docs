<template>
<Tutorial v-bind:innerHtml="tutorialContent" v-bind:pageTitle="title"></Tutorial>
</template>
<script lang="ts">
import { Component, Vue } from "nuxt-property-decorator";
import Tutorial from "../../components/tutorial.vue";
@Component({
  components: {
    Tutorial
  }
})
export default class extends Vue {
  tutorialContent = `%3Cp%3EIndexedDB%20is%20a%20pure%20transactional%20database%20which%20means%20all%20the%20query%20is%20executed%20inside%20the%20transaction.%3C/p%3E%0A%3Cp%3EJsStore%20provides%20-%20'transaction'%20api%20for%20executing%20transaction.%20The%20apis%20which%20are%20available%20inside%20the%20transaction%20are%20-%20%3C/p%3E%0A%3Cul%3E%0A%3Cli%3Eselect%3C/li%3E%0A%3Cli%3Ecount%3C/li%3E%0A%3Cli%3Eupdate%3C/li%3E%0A%3Cli%3Eremove%3C/li%3E%0A%3Cli%3Einsert%3C/li%3E%0A%3C/ul%3E%0A%3Cp%3EThere%20are%20some%20extra%20api%20available%20inside%20the%20transaction%20to%20make%20the%20transaction%20more%20useful.%20These%20are%20-%3C/p%3E%0A%3Cul%3E%0A%3Cli%3EsetResult%20-%20setResult%20accepts%20key%20and%20value.%20setResult%20is%20used%20to%20save%20the%20value%20which%20will%20be%20returned%20when%20transaction%20completes.%20The%20transaction%20returns%20an%20object,%20the%20object%20is%20in%20form%20of%20key%20and%20value%20which%20is%20set%20using%20setResult.%3C/li%3E%0A%3Cli%3Eabort%20-%20abort%20is%20used%20to%20abort%20the%20transaction.%20%3C/li%3E%0A%3C/ul%3E%0A%3Cp%3E%3Cstrong%3ENote%20:-%3C/strong%3E%20All%20extra%20apis%20are%20sychronous%20,%20so%20you%20should%20call%20these%20api%20inside%20the%20promise%20resolve%20callback%20i.e%20inside%20then%20callback.%3C/p%3E%0A%3Cp%3ELet's%20see%20a%20example%20-%20so%20consider%20a%20situation%20where%20a%20customer%20buy%20some%20products%20and%20customer%20is%20not%20into%20the%20db.%3C/p%3E%0A%3Cp%3ESo%20the%20steps%20will%20be%20-%20%3C/p%3E%0A%3Col%3E%0A%3Cli%3EAdd%20new%20customer%20-%20so%20insert%20in%20the%20table%20-%20%22Customer%22%3C/li%3E%0A%3Cli%3Eadd%20new%20order%20-%20insert%20new%20order%20for%20the%20above%20customer%3C/li%3E%0A%3Cli%3EUpdate%20products%20-%20reduce%20the%20number%20of%20product%20for%20the%20particular%20or%20list%20of%20products.%3C/li%3E%0A%3C/ol%3E%0A%3Cpre%3E%3Ccode%3Econnection.transaction(%7B%0A%20%20%20%20tables:%20%5B'customers',%20'orders'%5D,%20//%20list%20of%20tables%20which%20will%20be%20used%20in%20transaction%0A%20%20%20%20//%20the%20logic%20callback%20is%20not%20a%20closure%20i.e%20it%20wont%20have%20access%20to%20outer%20scope%20or%20global%20scope.%0A%20%20%20%20//%20basically%20function%20should%20be%20independent%0A%20%20%20%20logic:%20function(data)%20%7B%0A%20%20%20%20%20%20%20%20insert(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20into:%20'customers',%0A%20%20%20%20%20%20%20%20%20%20%20%20values:%20%5Bdata.customer%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20return:%20true%0A%20%20%20%20%20%20%20%20%7D).then(function(customer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//add%20customerid%20in%20order%0A%20%20%20%20%20%20%20%20%20%20%20%20data.order.customerId%20=%20customer.Id;%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20add%20the%20result%20to%20get%20in%20transaction%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20setResult('customer',%20customer)%0A%20%20%20%20%20%20%20%20%7D);%0A%0A%20%20%20%20%20%20%20%20insert(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20into:%20'orders',%0A%20%20%20%20%20%20%20%20%20%20%20%20values:%20%5Bdata.order%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20return:%20true%0A%20%20%20%20%20%20%20%20%7D).then(function(order)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setResult('order',%20order)%0A%20%20%20%20%20%20%20%20%7D);%0A%0A%20%20%20%20%20%20%20%20update(%7B%20in:%20'product',%0A%20%20%20%20%20%20%20%20%20%20%20%20where:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20productId:%20data.productId%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20set:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'-':%20data.itemSelled%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D,%0A%20%20%20%20data:%20%7B%20//%20the%20transaction%20logic%20will%20be%20called%20with%20supplying%20data%0A%20%20%20%20%20%20%20%20customer:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20name:%20'ujjwal%20gupta',%0A%20%20%20%20%20%20%20%20%20%20%20%20address:%20'india',%0A%20%20%20%20%20%20%20%20%20%20%20%20gender:%20'male'%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20order:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20total:%201000,%0A%20%20%20%20%20%20%20%20%20%20%20%20date:%20%2212/04/2018%22%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20productId:%205,%0A%20%20%20%20%20%20%20%20itemSelled:%204%0A%20%20%20%20%7D%0A%7D).then(function(result)%20%7B%0A%20%20%20%20console.log(result)%0A%7D).catch(function(err)%20%7B%0A%20%20%20%20console.log(err);%0A%7D);%0A%3C/code%3E%3C/pre%3E%0A%3Cp%3EFew%20important%20things%20to%20make%20sure%20you%20are%20using%20transaction%20in%20right%20way%20-%20%3C/p%3E%0A%3Cul%3E%0A%3Cli%3ETransaction%20should%20be%20light%20weight.%20Dont%20write%20too%20many%20or%20heavy%20logics%20inside%20it.%20The%20reason%20is%20%20-%20the%20indexeddb%20transaction%20is%20asyc%20and%20automatically%20commited%20and%20so%20jsstore.%3C/li%3E%0A%3Cli%3EThere%20may%20be%20situation%20where%20you%20have%20a%20heavy%20logic%20then%20-%20calculate%20the%20result%20and%20put%20it%20in%20data%20option.%3C/li%3E%0A%3C/ul%3E%0A%3Cp%20class=%22margin-top-40px%20center-align%22%3E%0A%20%20%20%20%3Cbutton%20class=%22btn%20info%20btnNext%22%3ENext%3C/button%3E%0A%3C/p%3E`;
  title="Transaction";
}
</script>
